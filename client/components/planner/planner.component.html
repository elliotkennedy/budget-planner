<div class="ui container">
    <div class="ui top attached segment">
        <h1 class="ui left floated">Budget Planner</h1>
    </div>
    <div *ngIf="budget.income.length > 0" class="ui attached segment">
        <h4 class="ui dividing header">Income</h4>
        <table class="ui very basic padded table">
            <thead>
            <tr>
                <th>Name</th>
                <th>Rate</th>
                <th>Amount</th>
                <th>Weekly</th>
                <th>Remove</th>
            </tr>
            </thead>
            <tbody>
                <tr *ngFor="let income of budget.income; let i = index">
                    <td><span style="font-weight: bold">{{income.name}}</span></td>
                    <td><span>Every {{income.rate}}</span></td>
                    <td><span>£{{income.value}}</span></td>
                    <td>£{{income.getWeeklyValue().value}}</td>
                    <td><i (click)="removeIncome(i)" style="cursor: hand" class="trash outline icon"></i></td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="ui attached segment">
        <h4 class="ui dividing header">Add Income</h4>
        <form class="ui form">
            <div class="inline fields">
                <div class="seven wide field">
                    <input [(ngModel)]="incomeInput.name" list="incomeSources" class="ui search dropdown" placeholder="Income type">
                    <datalist id="incomeSources">
                        <option value="Salary">Salary</option>
                        <option value="Bonus">Bonus</option>
                    </datalist>
                </div>
                <div class="four wide field">
                    <label>Every </label>
                    <select [(ngModel)]="incomeInput.rate" class="ui fluid dropdown">
                        <option value="DAY">Day</option>
                        <option value="Week">Week</option>
                        <option value="Month">Month</option>
                        <option value="Year">Year</option>
                    </select>
                </div>
                <div class="four wide field">
                    <div class="ui labeled input">
                        <div class="ui label">£</div>
                        <input [(ngModel)]="incomeInput.amount" type="number" step="0.01" placeholder="Amount">
                    </div>
                </div>
                <div class="one wide field">
                    <button [class.disabled]="!incomePopulated()" (click)="addIncome()" class="ui icon button">
                        <i class="plus icon"></i>
                    </button>
                </div>
            </div>
        </form>
    </div>
    <div class="ui attached segment">
        <div class="ui two column divided grid">
            <div class="column">
                <h2 class="ui dividing header">Your Income Breakdown</h2>
                <canvas [doughnutChart]="budget.income"></canvas>
            </div>
            <div class="column">
                <h2 class="ui dividing header">Total Weekly Income</h2>
                <!--<canvas doughnutChart></canvas>-->
            </div>
        </div>
    </div>
    <div class="ui attached segment">
        <h2 class="ui left floated">Outgoings</h2>
    </div>
    <div class="ui attached segment">
        <table class="ui very basic padded table">
            <tbody>
            <tr *ngFor="let income of budget.income">
                <td><span style="font-weight: bold">{{income.name}}</span></td>
                <td><span>Every {{income.rate}}</span></td>
                <td><span>£{{income.value}}</span></td>
                <td>£ 10.99</td>
                <td><i class="trash outline icon"></i></td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="ui attached segment">
        <form class="ui form">
            <div class="inline fields">
                <div class="seven wide field">
                    <input [(ngModel)]="incomeInput.name" list="outgoingSources" class="ui search dropdown" placeholder="Income type">
                    <datalist id="outgoingSources">
                        <option value="Salary">Salary</option>
                        <option value="Bonus">Bonus</option>
                    </datalist>
                </div>
                <div class="four wide field">
                    <label>Every </label>
                    <select [(ngModel)]="incomeInput.rate" class="ui fluid dropdown">
                        <option value="DAY">Day</option>
                        <option value="Week">Week</option>
                        <option value="Month">Month</option>
                        <option value="Year">Year</option>
                    </select>
                </div>
                <div class="four wide field">
                    <div class="ui labeled input">
                        <div class="ui label">£</div>
                        <input [(ngModel)]="incomeInput.amount" type="number" step="0.01" placeholder="Amount">
                    </div>
                </div>
                <div class="one wide field">
                    <button [class.disabled]="!incomePopulated()" (click)="addIncome()" class="ui icon button">
                        <i class="plus icon"></i>
                    </button>
                </div>
            </div>
        </form>
    </div>
    <div class="ui attached segment">
        <div class="ui two column divided grid">
            <div class="column">
                <h2 class="ui dividing header">Your Income Breakdown</h2>
                <!--<canvas [doughnutChart]="budget.income"></canvas>-->
            </div>
            <div class="column">
                <!--<canvas doughnutChart></canvas>-->
            </div>
        </div>
    </div>
    <div class="ui bottom attached segment">
        <br/>
        <button (click)="saveBudget()" class="ui right floated positive large button">Save</button>
        <br/>
        <br/>
        <br/>
    </div>
    <br/>
</div>
