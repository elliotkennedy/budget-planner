<div class="ui container">
    <div class="ui segment">
        <h1 class="ui left floated">Budget Planner</h1>
    </div>
    <div *ngIf="budget.income.length > 0" class="ui attached segment">
        <h4 class="ui dividing header">Income</h4>
        <table class="ui very basic padded table">
            <thead>
            <tr>
                <th>Name</th>
                <th>Rate</th>
                <th>Amount</th>
                <th>Weekly Amount</th>
                <th>Remove</th>
            </tr>
            </thead>
            <tbody>
                <tr *ngFor="let income of budget.income; let i = index">
                    <td><span style="font-weight: bold">{{income.name}}</span></td>
                    <td><span>Every {{income.rate}}</span></td>
                    <td><span>£{{income.value.toFixed(2)}}</span></td>
                    <td>£{{income.getWeeklyValue().toFixed(2)}}</td>
                    <td><i (click)="removeIncome(i)" style="cursor: hand" class="trash outline icon"></i></td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="ui attached segment">
        <h4 class="ui dividing header">Add Income</h4>
        <form class="ui form">
            <div class="inline fields">
                <div class="seven wide field">
                    <input [(ngModel)]="incomeInput.name" list="incomeSources" class="ui search dropdown" placeholder="Income type">
                    <datalist id="incomeSources">
                        <option value="Salary">Salary</option>
                        <option value="Bonus">Bonus</option>
                    </datalist>
                </div>
                <div class="four wide field">
                    <label>Every </label>
                    <select [(ngModel)]="incomeInput.rate" class="ui fluid dropdown">
                        <option value="Day">Day</option>
                        <option value="Week">Week</option>
                        <option value="Month">Month</option>
                        <option value="Year">Year</option>
                    </select>
                </div>
                <div class="four wide field">
                    <div class="ui labeled input">
                        <div class="ui label">£</div>
                        <input [(ngModel)]="incomeInput.amount" type="number" step="0.01" placeholder="Amount">
                    </div>
                </div>
                <div class="one wide field">
                    <button [class.disabled]="!incomePopulated()" (click)="addIncome()" class="ui icon button">
                        <i class="plus icon"></i>
                    </button>
                </div>
            </div>
        </form>
    </div>
    <div class="ui attached segment">
        <div class="ui two column divided grid">
            <div class="column">
                <h2 class="ui dividing header">Your Income Breakdown</h2>
            </div>
            <div class="column">
                <h2 class="ui dividing header">Total Weekly Income</h2>
            </div>
        </div>
    </div>
    <div class="ui bottom attached segment">
        <div class="ui two column divided grid">
            <div class="column">
                <canvas [doughnutChart]="budget.income"></canvas>
            </div>
            <div class="column">
                <br/>
                <h1 class="ui huge center aligned icon header">
                    <i class="circular pound icon"></i>
                </h1>
                <h1 class="ui huge center aligned header">
                    £{{budget.getTotalWeeklyIncome().toFixed(2)}}
                </h1>
            </div>
        </div>
    </div>

    <div *ngIf="budget.outgoings.length > 0" class="ui attached segment">
        <h4 class="ui dividing header">Outgoings</h4>
        <table class="ui very basic padded table">
            <thead>
            <tr>
                <th>Name</th>
                <th>Rate</th>
                <th>Amount</th>
                <th>Weekly Amount</th>
                <th>Remove</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let outgoing of budget.outgoings; let i = index">
                <td><span style="font-weight: bold">{{outgoing.name}}</span></td>
                <td><span>Every {{outgoing.rate}}</span></td>
                <td><span>£{{outgoing.value.toFixed(2)}}</span></td>
                <td>£{{outgoing.getWeeklyValue().toFixed(2)}}</td>
                <td><i (click)="removeOutgoing(i)" style="cursor: hand" class="trash outline icon"></i></td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="ui attached segment">
        <h4 class="ui dividing header">Add Outgoing</h4>
        <form class="ui form">
            <div class="inline fields">
                <div class="seven wide field">
                    <input [(ngModel)]="outgoingInput.name" list="outgoingSources" class="ui search dropdown" placeholder="Outgoing type">
                    <datalist id="outgoingSources">
                        <option value="Broadband">Broadband</option>
                        <option value="Electricity bill">Electricity bill</option>
                        <option value="Home Insurance">Home insurance</option>
                        <option value="Home Phone">Home phone</option>
                        <option value="Line rental">Line rental</option>
                        <option value="Mobile phone">Mobile phone</option>
                        <option value="Rent">Rent</option>
                        <option value="Water bill">Water bill</option>
                    </datalist>
                </div>
                <div class="four wide field">
                    <label>Every </label>
                    <select [(ngModel)]="outgoingInput.rate" class="ui fluid dropdown">
                        <option value="Day">Day</option>
                        <option value="Week">Week</option>
                        <option value="Month">Month</option>
                        <option value="Year">Year</option>
                    </select>
                </div>
                <div class="four wide field">
                    <div class="ui labeled input">
                        <div class="ui label">£</div>
                        <input [(ngModel)]="outgoingInput.amount" type="number" step="0.01" placeholder="Amount">
                    </div>
                </div>
                <div class="one wide field">
                    <button [class.disabled]="!outgoingPopulated()" (click)="addOutgoing()" class="ui icon button">
                        <i class="plus icon"></i>
                    </button>
                </div>
            </div>
        </form>
    </div>
    <div class="ui attached segment">
        <div class="ui two column divided grid">
            <div class="column">
                <h2 class="ui dividing header">Total Weekly Outgoings</h2>
            </div>
            <div class="column">
                <h2 class="ui dividing header">Outgoings Breakdown</h2>
            </div>
        </div>
    </div>
    <div class="ui bottom attached segment">
        <div class="ui two column divided grid">
            <div class="column">
                <br/>
                <h1 class="ui huge center aligned icon header">
                    <i class="circular pound icon"></i>
                </h1>
                <h1 class="ui huge center aligned header">
                    £{{budget.getTotalWeeklyOutgoings().toFixed(2)}}
                </h1>
            </div>
            <div class="column">
                <canvas [doughnutChart]="budget.outgoings"></canvas>
            </div>
        </div>
    </div>
    <div class="ui segment" style="min-height: 70px">
        <button (click)="saveBudget()" class="ui right floated positive large button">Save</button>
    </div>
    <br/>
</div>
